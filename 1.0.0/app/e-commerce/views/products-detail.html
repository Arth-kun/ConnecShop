<div class="changes">
    <div class="headerChanges" onclick="history.back()">
        <span class="glyphicon glyphicon-menu-left returnButton"></span>
        {{category()}}
    </div>
</div>

<div id="productsDetail" class="row" ng-repeat="product in products" ng-init="carousel">

    <div class="col-xs-12">

        <div class="inner">

            <p class="artDesignation">{{product.ArtDesignation}}</p>
            <div class="noteAvis" ng-class="{displayNone:!product.hasNote}">
                <span ng-switch="product.Note" class="noteMoy">
                    <span class="notes-moyennes" ng-switch-when="0">
                        <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=0, 'yellow-star':$index<0}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                    </span>
                    <span class="notes-moyennes" ng-switch-when="1">
                        <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=1, 'yellow-star':$index<1}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                    </span>
                    <span class="notes-moyennes" ng-switch-when="2">
                        <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=2, 'yellow-star':$index<2}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                    </span>
                    <span class="notes-moyennes" ng-switch-when="3">
                        <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=3, 'yellow-star':$index<3}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                    </span>
                    <span class="notes-moyennes" ng-switch-when="4">
                        <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=4, 'yellow-star':$index<4}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                    </span>
                    <span class="notes-moyennes" ng-switch-when="5">
                        <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=5, 'yellow-star':$index<5}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                    </span>
                </span>
                <span class="nbAvis" ng-class="{displayNone:!product.avis}">{{nbAvis}} avis</span>
            </div>

            <div class="productBlock">
                <span class="promoTag" ng-class="{displayNone:!product.remise}">
                    <span class="backgroundPromo"><span class="textPromo">PROMO</span></span>
                </span>

                <div class="carouselImagesProduct carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target=".carouselImagesProduct" data-slide-to="{{$index}}" ng-class="{active:$first}" ng-repeat="img in product.imgs"></li>
                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        <div class="item" ng-class="{active:$first}" ng-repeat="img in product.imgs">
                            <img ng-src="{{img}}">
                        </div>
                    </div>
                </div>

                <p class="prixProduct">
                    <span class="remiseContainer" ng-class="{displayNone:!product.remise}">
                        <span class="pourcentage">{{product.pourcentage}}%</span>
                        <span class="prixNonRemise">{{product.prixNonRemise}}€</span>
                    </span>
                    <span class="prixTTC">{{product.PrixTTC}} €</span>
                </p>

                <div class="addCartProduct">
                    <div class="addCartButton" ng-click="addCart(product)" ng-class='{noStock:!product.Stock}'>AJOUTER AU PANIER</div>
                </div>
            </div>

            <div class="descriptionProduct" ng-class="{displayNone:!product.description}">
                <div class="descriptionProductTitle" ng-click="description.dispDesc()">
                    <span class="descriptionProductText">Description</span>
                    <span class="glyphicon fleche-description pull-right" ng-class="{'glyphicon-menu-down':!description.showDesc, 'glyphicon-menu-up':description.showDesc}"></span>
                </div>
                <p class="descriptionProductContent" ng-class="{displayNone:!description.showDesc}">{{product.CatHTMLDesignation}}</p>
            </div>

            <div class="avisProduct" ng-class="{displayNone:!product.avis}">
                <div class="avisProductTitle" ng-click="avis.dispDesc()">
                    <span class="avisProductText">Avis</span>
                    <span class="glyphicon fleche-avis pull-right" ng-class="{'glyphicon-menu-down':!avis.showDesc, 'glyphicon-menu-up':avis.showDesc}"></span>
                </div>
                <div class="avisProductContent" ng-class="{displayNone:!avis.showDesc}">
                    <ul class="listAvis">
                        <li class="listAvisProduct" ng-repeat="avisCt in product.ListeAvis" ng-class="{notLast:!$last, displayNone:!avisCt.Visible}">
                            <p class="listAvisProductHead">
                                <span class="pseudoAvis">{{avisCt.Pseudo}}</span>
                                <span class="starsavis pull-right">
                                    <span ng-switch="avisCt.Note" class="noteMoy">
                                        <span class="notes-moyennes" ng-switch-when="0">
                                            <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=0, 'yellow-star':$index<0}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                                        </span>
                                        <span class="notes-moyennes" ng-switch-when="1">
                                            <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=1, 'yellow-star':$index<1}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                                        </span>
                                        <span class="notes-moyennes" ng-switch-when="2">
                                            <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=2, 'yellow-star':$index<2}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                                        </span>
                                        <span class="notes-moyennes" ng-switch-when="3">
                                            <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=3, 'yellow-star':$index<3}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                                        </span>
                                        <span class="notes-moyennes" ng-switch-when="4">
                                            <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=4, 'yellow-star':$index<4}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                                        </span>
                                        <span class="notes-moyennes" ng-switch-when="5">
                                            <span class="glyphicon glyphicon-star" ng-class="{'grey-star':$index>=5, 'yellow-star':$index<5}" ng-repeat="nbStars in [1,2,3,4,5]"></span>
                                        </span>
                                    </span>
                                </span>
                            </p>
                            <p class="listAvisProductText">{{avisCt.Commentaire}}</p>
                            <p class="listAvisProductDate">{{avisCt.DateCreation}}</p>
                        </li>
                    </ul>
                </div>
            </div>

        </div>

    </div>

</div>